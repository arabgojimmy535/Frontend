{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { getStorage, ref, uploadBytesResumable, getDownloadURL } from \"firebase/storage\";\nexport default {\n  name: \"vehiculoPost\",\n  data() {\n    return {\n      categoria: 0,\n      idv: '',\n      vehiculo: {\n        marca: \"\",\n        modelo: \"\",\n        año: 0,\n        precio: 0,\n        usado: true,\n        imagen: \"\",\n        vendido: false\n      }\n    };\n  },\n  methods: {\n    obtenerimagen(e) {\n      var file = e.target.files[0];\n      const storage = getStorage();\n      const metadata = {\n        contentType: \"image/jpeg\"\n      };\n      const storageRef = ref(storage, \"imagenes/\" + file.name);\n      const uploadTask = uploadBytesResumable(storageRef, file, metadata);\n      uploadTask.on(\"state_changed\", snapshot => {\n        const progress = snapshot.bytesTransferred / snapshot.totalBytes * 100;\n        console.log(\"Upload is \" + progress + \"% done\");\n        switch (snapshot.state) {\n          case \"paused\":\n            console.log(\"Upload is paused\");\n            break;\n          case \"running\":\n            console.log(\"Upload is running\");\n            break;\n        }\n      }, error => {\n        switch (error.code) {\n          case \"storage/unauthorized\":\n            break;\n          case \"storage/canceled\":\n            break;\n          case \"storage/unknown\":\n            break;\n        }\n      }, () => {\n        getDownloadURL(uploadTask.snapshot.ref).then(downloadURL => {\n          this.vehiculo.imagen = downloadURL;\n        });\n      });\n    },\n    publicar() {\n      let url = \"http://127.0.0.1:8000/api/vehiculos/\";\n      let vehiculo = this.vehiculo;\n      let post = {\n        method: \"POST\",\n        body: JSON.stringify(vehiculo),\n        headers: {\n          \"content-Type\": \"application/json\"\n        }\n      };\n      fetch(url, post).then(response => response.json()).then(response => {\n        this.idv = response.id;\n      });\n    },\n    categorizar() {\n      let url = \"http://127.0.0.1:8000/api/vehiculos/\";\n      let ca = this.vehiculo;\n      let post = {\n        method: \"POST\",\n        body: JSON.stringify(vehiculo),\n        headers: {\n          \"content-Type\": \"application/json\"\n        }\n      };\n      fetch(url, post).then(response => response.json());\n      this.$router.push(\"/\");\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["getStorage","ref","uploadBytesResumable","getDownloadURL","name","data","categoria","idv","vehiculo","marca","modelo","año","precio","usado","imagen","vendido","methods","obtenerimagen","e","file","target","files","storage","metadata","contentType","storageRef","uploadTask","on","snapshot","progress","bytesTransferred","totalBytes","console","log","state","error","code","then","downloadURL","publicar","url","post","method","body","JSON","stringify","headers","fetch","response","json","id","categorizar","ca","$router","push"],"sourceRoot":"","sources":["C:\\Users\\JIMMY ARANGO\\OneDrive\\Documentos\\GitHub\\PAGINA_WEB\\PROYECTO\\frontend\\src\\views\\SubirVehiculos.vue"],"sourcesContent":["<template>\r\n  <body>\r\n    <main class=\"container\">\r\n      <div class=\"row mt-3\">\r\n        <div class=\"col-md-4 offset-md-4 mt-5\">\r\n          <section class=\"bg-transparent bg-gradient rounded\">\r\n            <form\r\n              v-on:submit.prevent=\"publicar\"\r\n              class=\"card card-body bg-transparent bg-gradient rounded\"\r\n              enctype=\"multipart/form-data\"\r\n            >\r\n              <h1 class=\"text-center\">SUBIR VEHICULO</h1>\r\n              \r\n              <br />\r\n              <!-- Marca -->\r\n              <div class=\"mb-3\">\r\n                <label for=\"marca\">Marca:</label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"marca\"\r\n                  class=\"form-control bg-transparent bg-gradient\"\r\n                  placeholder=\"Marca\"\r\n                  v-model=\"vehiculo.marca\"\r\n                />\r\n              </div>\r\n              <!-- Modelo -->\r\n              <div class=\"mb-3\">\r\n                <label for=\"modelo\">Modelo:</label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"modelo\"\r\n                  class=\"form-control bg-transparent bg-gradient\"\r\n                  placeholder=\"Modelo\"\r\n                  v-model=\"vehiculo.modelo\"\r\n                />\r\n              </div>\r\n              <!-- Año -->\r\n              <div class=\"mb-3\">\r\n                <label for=\"Año\">Año:</label>\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"Año\"\r\n                  class=\"form-control bg-transparent bg-gradient\"\r\n                  placeholder=\"Año\"\r\n                  v-model=\"vehiculo.año\"\r\n                />\r\n              </div>\r\n              <!-- precio -->\r\n              <div class=\"mb-3\">\r\n                <label for=\"precio\">Precio:</label>\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"Precio\"\r\n                  class=\"form-control bg-transparent bg-gradient\"\r\n                  placeholder=\"Precio\"\r\n                  v-model=\"vehiculo.precio\"\r\n                />\r\n              </div>\r\n              <!-- Usado -->\r\n              <div class=\"mb-3\">\r\n                <label for=\"Usado\">Usado:</label>\r\n                <input\r\n                  type=\"checkbox\"\r\n                  class=\"form-check-input mx-2\"\r\n                  v-model=\"vehiculo.usado\"\r\n                />\r\n              </div>\r\n              <!-- Imagen -->\r\n              <div class=\"custom-file mb-4\">\r\n                <input\r\n                  type=\"file\"\r\n                  class=\"form-control bg-transparent bg-gradient\"\r\n                  @change=\"obtenerimagen\"\r\n                />\r\n              </div>\r\n              <!-- Categoria -->\r\n              <div class=\"mb-3\">\r\n                <label>Categoria</label>\r\n                <select class=\"form-control bg-transparent bg-gradient\" v-model=\"categoria\">\r\n                  <option disabled-value=\"\">Seleccionar Categoria</option>\r\n                  <option value=\"1\">Liviano</option>\r\n                  <option value=\"2\">Pesado</option>\r\n                  <option value=\"3\">Especiales</option>\r\n                  <option value=\"4\">Agricolas</option>\r\n                </select>\r\n              </div>\r\n\r\n              <input type=\"submit\" class=\"btn btn-primary\" value=\"PUBLICAR\" />\r\n            </form>\r\n          </section>\r\n        </div>\r\n      </div>\r\n    </main>\r\n  </body>\r\n</template>\r\n<script>\r\nimport {\r\n  getStorage,\r\n  ref,\r\n  uploadBytesResumable,\r\n  getDownloadURL,\r\n} from \"firebase/storage\";\r\nexport default {\r\n  name: \"vehiculoPost\",\r\n  data() {\r\n    return {\r\n      categoria:0,\r\n      idv:'',\r\n      vehiculo: {\r\n        marca: \"\",\r\n        modelo: \"\",\r\n        año: 0,\r\n        precio: 0,\r\n        usado: true,\r\n        imagen: \"\",\r\n        vendido: false,\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    obtenerimagen(e) {\r\n      var file = e.target.files[0];\r\n      const storage = getStorage();\r\n      const metadata = {\r\n        contentType: \"image/jpeg\",\r\n      };\r\n      const storageRef = ref(storage, \"imagenes/\" + file.name);\r\n      const uploadTask = uploadBytesResumable(storageRef, file, metadata);\r\n      uploadTask.on(\r\n        \"state_changed\",\r\n        (snapshot) => {\r\n          const progress =\r\n            (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n          console.log(\"Upload is \" + progress + \"% done\");\r\n          switch (snapshot.state) {\r\n            case \"paused\":\r\n              console.log(\"Upload is paused\");\r\n              break;\r\n            case \"running\":\r\n              console.log(\"Upload is running\");\r\n              break;\r\n          }\r\n        },\r\n        (error) => {\r\n          switch (error.code) {\r\n            case \"storage/unauthorized\":\r\n              break;\r\n            case \"storage/canceled\":\r\n              break;\r\n            case \"storage/unknown\":\r\n              break;\r\n          }\r\n        },\r\n        () => {\r\n          getDownloadURL(uploadTask.snapshot.ref).then((downloadURL) => {\r\n            this.vehiculo.imagen = downloadURL;\r\n          });\r\n        }\r\n      );\r\n    },\r\n    publicar() {\r\n      let url = \"http://127.0.0.1:8000/api/vehiculos/\";\r\n      let vehiculo = this.vehiculo;\r\n      let post = {\r\n        method: \"POST\",\r\n        body: JSON.stringify(vehiculo),\r\n        headers: {\r\n          \"content-Type\": \"application/json\",\r\n        },\r\n      };\r\n      fetch(url, post)\r\n        .then((response)=>response.json())\r\n        .then((response) => {\r\n          this.idv= response.id\r\n        }\r\n        )\r\n    },\r\n    categorizar(){\r\n      let url = \"http://127.0.0.1:8000/api/vehiculos/\";\r\n      let ca = this.vehiculo;\r\n      let post = {\r\n        method: \"POST\",\r\n        body: JSON.stringify(vehiculo),\r\n        headers: {\r\n          \"content-Type\": \"application/json\",\r\n        },\r\n      };\r\n      fetch(url, post)\r\n        .then((response)=>response.json())\r\n      \r\n      this.$router.push(\"/\");\r\n    }\r\n  },\r\n};\r\n</script>\r\n"]},"metadata":{},"sourceType":"module"}